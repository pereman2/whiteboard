{"version":3,"sources":["resources/background/Square.png","resources/background/Circle.png","resources/background/Line.png","resources/background/picker_mask.png","App.js","UI/CircleWidth.js","UI/ColorPicker.js","BusinessLogic/Line.js","BusinessLogic/Eraser.js","BusinessLogic/Brush.js","BusinessLogic/Form.js","BusinessLogic/Rectangle.js","BusinessLogic/Circle.js","BusinessLogic/StraightLine.js","UI/DropDown.js","UI/Toolbar.js","Persistence/RoomCreator.js","Persistence/RoomReceiver.js","BusinessLogic/VoiceConnection.js","BusinessLogic/RoomConnection.js","BusinessLogic/DataConnection.js","UI/RoomConnection.js","UI/Board.js","serviceWorker.js","UI/MainPage.js","UI/MainRouter.js","index.js","resources/background/Arrowwhite.png"],"names":["module","exports","App","getMousePos","circle","evt","x","clientX","y","clientY","moveLinearGradient","to","CircleWidth","props","context","saveWidth","event","console","log","key","pixels","refs","contentEditable","newWidth","parseInt","innerHTML","isNaN","setState","width","background","state","style","blur","onValueChange","error","editWidth","focus","saveLast","canvas","document","querySelector","pos","rect","getBoundingClientRect","mouseX","left","mouseY","top","lastX","lastY","mouseDown","isDown","mouseUp","mouseMove","difference","sum","this","className","ref","onMouseUp","e","onMouseMove","onMouseDown","React","Component","ColorPicker","handleChangeComple","color","hex","eventColor","onColorChange","onChangeComplete","Line","posActual","posAnterior","setWidth","getWidth","getContext","ctx","getCanvas","setMode","mode","setColor","setPosActual","setPosAnterior","updateLine","newPos","setCanvas","Error","Eraser","draw","globalCompositeOperation","moveTo","lineTo","lineJoin","lineCap","lineWidth","strokeStyle","stroke","Brush","Form","Rectangle","setAttributes","makeRect","height","STARTING_ANGLE","Math","PI","ENDING_ANGLE","Circle","makeCircle","center","getCenter","arc","radius","StraightLine","makeStraightLine","DropDown","handleClick","popupOn","popup","current","display","changeImg","elementId","aux","getElementById","src","handleFormClicked","clickedId","target","id","onFormClicked","createRef","dropDownBox","onClick","BRUSH_DEFAULT_CONFIG","ERASER_DEFAULT_CONFIG","FORM_DEFAULT_CONFIG","posa","Toolbar","reset","onResetCanvas","setTool","tool","changeLastToolColor","lastTool","changeTool","handleWidthChange","line","form","lineErase","handleColorChange","onToolChange","hideConfig","querySelectorAll","forEach","element","handleArrowOpen","getTools","newForm","forms","onFormChanged","rectangle","straightLine","tools","viewBox","fill","xmlns","filter","toolBrush","d","filterUnits","color-interpolation-filters","flood-opacity","result","in","type","values","dy","stdDeviation","in2","arrow","toolForm","toolEraser","operator","k2","k3","require","window","constraints","video","audio","adapter","browserDetails","browser","version","mediaConstraints","makingOffer","ignoreOffer","polite","RoomConnection","socket","connect","room","a","localVideo","navigator","mediaDevices","getUserMedia","stream","getTracks","track","localPeerConnection","addTrack","srcObject","play","setSocketEvents","ontrack","onTrackHandler","onnegotiationneeded","handleNegotation","addEventListener","handleConnection","iceCandidates","createOffer","offer","setLocalDescription","emit","localDescription","remoteVideo","onunmute","streams","on","description","candidate","offerCollision","signalingState","setRemoteDescription","createAnswer","answer","addIceCandidate","data","socketId","rtcDescription","RTCSessionDescription","gotAnswer","addIceCandidates","gotLocalMediaStream","addStream","handleLocalMediaStreamError","iceCandidate","i","length","then","handleConnectionSuccess","catch","handleConnectionFailure","peer","setDataChannelEvents","dataChannel","onmessage","message","getLocalSocket","io","reconnect","transports","path","getRemoteSocket","protocol","location","getMediaConstraints","getMediaPermissions","permissions","query","name","getDevicePermissions","media","RTCPeerConnection","iceServers","urls","offerToReceiveVideo","offerToReceiveAudio","EventEmitter","DataConnection","createDataChannel","onopen","connected","handleDataMessage","updateCanvas","sendData","send","JSON","stringify","parse","getLocalConnection","canvasImg","dataConnection","connection","initializeConnection","roomConnection","onCanvasUpdate","muted","Board","setListener","isKeysCombination","ctrlKey","canvasUndo","canvasRedo","canvasPush","lastCanvasImg","toDataURL","updatePushArray","removeUnusedElements","toStringCanvas","pushArray","lastCanvas","Array","undefined","posAux","Image","canvasImgReceived","drawImage","initializeRefs","toolbar","setToolsCanvas","setMouseIsDown","initializePaths","value","initializePathBrush","initializePathForm","initializePathEraser","beginPath","actualizarPos","closePaths","closePath","brush","erase","clearRect","handleToolModified","toolObj","changeBrush","changeEraser","changeForm","newBrush","newEraser","handleToolChange","onToolModified","Boolean","hostname","match","MainPage","redirect","idRoom","component","placeholder","MainRouter","ReactDOM","render","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ff01d02d.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABYSURBVHgB7dpBEQAgDMCwgX/PYKO3Sxz03zMzb5bYEPLuLCGkRkiNkBohNUJqhNQIqRFSI6RGSI2QGiE1QmqE1AipEVIjpEZIjZAaITVCaoTUCKk5s2Q8+0B3BF2mHjcDAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKiSURBVHgB3Zq/WtswFMUPsHRrxm65I1vdrVs9dmvfgLwBeQP8Bm2fgPAEbp8AOnYqfYKajY2wsYFOdJUo+QiJbdmW+H3fRdhWIp1c/fGVdIBwiLHc2HtNR545KrVrtd963ZoDtIOVnBo70f9/wlaw0vTe2NzLP4YVnKnlep+f+4FAouqQG7s0dmfszNgnNIeCzo3911TQA2KsxErACGGZoAdBbEJdCdiEZVDQCQLzXb84Q3+IlvkNAeAv/xfW1V17YVv5pdahcflOxBmGh3VoLCYWEQ4nphbsEyXiY4YafWYC28mG6BO7YJ1Yt+mujKIZBfHCkZPTgLyUiaNTTP1iG6zj1qYvsN5IATYxeiV/7iG9EXwm7RB65XLzpiAdbzicVxaD0pHepLpbY7+QDg/G3hj7CBvXLOj7PSoUObyWJEivWfmweY3ZtL7qjZSalc8x/xzCxtjXSBfWPaOQDGkLuTGWU4hggKA/IHTCYgh+RNq4+SR5IeTxEK8ECuECWoyxRy2ckLdIFzFWOSEpvp44xFjFmf1Yb/xBmnwx9kCP/EPaHllO6AIdhxNlbY2BFznSg95YvLm7eWSGdlsDQ3EKu7eyZC1sTIhls3KhLsPGz8bewQsbI2ei6cXmgxxpeWWtkx95DyrYQJ4PY/dKATuRX2zLILBeiXleEey5rDtF/IvYey8kcun+HPHB9d7aW3HcVCkQDwUabPQQt/VWYHgKBNpHLDHcZugMe4jYFepyiPsAOzTzywT9kWmZd1qHOQIxgR0xCnTLSMuggFN0hGB1biT0XoovoESPZ1L8gzBtJtAcKwHcuGn0Ft72mJPAut8thF/BRmuMOiusr2C6s1sUPdaUn2Pbn8Eec2rcD9oK8RGsDp5lei3e87lnV7CCmd4gAE8P35m66oMsUAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAADCAYAAAA+2zeHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABDSURBVHgBxcuxCQAgDETRC7iH2cRRHMVV4yYWFjY5NCL4ys+dYGpYOnwGzi4+zyWnFbKt4DTYLdiPPoI/MukKTnd9AJwxCORGX/rjAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/picker_mask.a4d3b14f.png\";","import React from 'react';\nimport './App.css';\n\nfunction App() {\n  \n  return (\n    <div className=\"App\">\n       <canvas id=\"myCanvas\" width=\"200\" height=\"100\"  ></canvas>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom'\nimport './CircleWidth.css';\nimport ColorPickerWrapper from './ColorPickerWrapper';\nimport { CirclePicker } from 'react-color';\n\nfunction getMousePos(circle, evt) {\n    return {\n        x: evt.clientX,\n        y: evt.clientY\n    };\n}\nfunction moveLinearGradient(to) {\n    var linear = 'linear-gradient(to bottom, rgba(255,255,255,1) 0%, rgba(0,0,0,1) ' \n                + to + '%)'; \n    return linear;\n}\n\nclass CircleWidth extends React.Component {\n    constructor(props, context) { \n        super(props, context);\n        this.state = {\n            width: this.props.width,\n        }\n        console.log(this.props)\n    }\n    saveWidth = event => {\n        console.log('yee')\n        if(event.key === 'Enter') {\n            try {\n                var pixels = this.refs.circle; \n                pixels.contentEditable = 'false';\n                var newWidth = parseInt(pixels.innerHTML, 10);\n                if(!isNaN(newWidth) &&  newWidth < 100) {\n                    this.setState({ width: newWidth });\n                    //Cambia el background del circulo\n                    var background = moveLinearGradient(100 - this.state.width);\n                    this.state.circle.style.background = background; \n                }\n                pixels.innerHTML = this.state.width;\n                pixels.blur();\n\n                //Acciona el evento para el padre cuando cambia el valor\n                this.props.onValueChange(event);\n            } catch (error) {}\n\n\n        }\n    }\n\n    editWidth = event => {\n        var pixels = this.refs.circle; \n        if(pixels != null) {\n            pixels.contentEditable = true;\n            pixels.focus();\n        }\n    }\n\n    saveLast = (event, x, y) => {\n        let canvas = document.querySelector('#Board');\n        var pos = getMousePos(canvas, event);\n        var rect = canvas.getBoundingClientRect();\n        var mouseX = x || (pos.x - rect.left);\n        var mouseY = y || (pos.y - rect.top);\n        this.setState({\n            lastX: mouseX,\n            lastY: mouseY,\n        });\n    }\n    \n    mouseDown = event => {\n        this.setState({ isDown: true });\n        this.state.circle.focus();\n        this.saveLast(event);\n    }\n\n    mouseUp = event => {\n        var pos = getMousePos(this.state.circle, event);\n        this.setState({\n            isDown: false,\n        });\n    }\n\n    mouseMove = event => {\n        if (this.state.isDown) {\n            var pos = getMousePos(this.state.circle, event);\n            var difference = this.state.lastY - pos.y;\n            //Width change speed\n            var difference = parseInt(difference * 0.1, 10);\n            var sum = this.state.width + difference;\n            if(sum < 100 && sum > 0) {\n                this.setState({ width: sum });\n                var background = moveLinearGradient(100 - this.state.width);\n                this.state.circle.style.background = background; \n                var background = moveLinearGradient(100 - sum);\n                this.state.circle.style.background = background; \n                //Evento para el padre cuando cambia el valor\n                this.onValueChange(this);\n            }\n        }\n    }\n    onValueChange = event => {\n        this.props.onValueChange(event);\n    }\n    componentDidMount() {\n        var circle = this.refs.circle; \n        var pixels = this.refs.pixels; \n        this.setState({ circle: circle });\n        pixels.contentEditable = 'false';\n    }\n    render() {\n        return (\n            <div className=\"CircleWidth\">\n                <div ref='circle' onMouseUp={(e) => this.mouseUp(e)} onMouseMove={(e) => this.mouseMove(e)} onMouseDown={(e) => this.mouseDown(e)} className='brush-circle'>\n                    <div ref='pixels' className='width-circle'\n                    >{this.state.width}</div>\n                </div>\n            </div>\n\n        );\n    }\n}\n\nexport default CircleWidth; \n","import React from 'react';\nimport './ColorPicker.css';\nimport { ChromePicker } from 'react-color';\nimport background from '../resources/background/picker_mask.png';\nimport { MDBCard, MDBCardBody } from \"mdbreact\";\n\n\n\nclass ColorPicker extends React.Component {\n    constructor(props, context) { super(props, context)\n        this.state = {\n            background: '#fff',\n        }\n    }\n    handleChangeComple = color => {\n        this.setState({ background: color.hex });\n        this.eventColor(color);\n    }\n    eventColor = color => {\n        this.props.onColorChange(color);\n    }\n    render() {\n        return (\n            <div className=\"ColorPicker\">\n                <ChromePicker\n                    color={this.state.background}\n                    onChangeComplete= { this.handleChangeComple }\n                />\n            </div>\n\n        );\n    }\n}\n\nexport default ColorPicker;\n","class Line {\n    constructor(width, color, posActual, posAnterior) {\n        if ((typeof posActual != 'object') || (typeof posAnterior != 'object')) {\n            throw new Error('Posicion formato incorrecto( {x:x,y:y})')\n        }\n        this.width = width;\n        this.color = color;\n        this.posActual = posActual;\n        this.posAnterior = posAnterior;\n    }\n    \n    setWidth = function (width) {\n        this.width = width;\n    }\n    \n    getWidth = function () {\n        return this.width;\n    }\n    \n    getContext = function () {\n        return this.ctx;\n    }\n    \n    getCanvas = function () {\n        return this.canvas;\n    }\n    \n    setMode = function (mode) {\n        this.mode = mode;\n    }\n    \n    setColor = function (color) {\n        this.color = color;\n    }\n    \n    setPosActual = function (posActual) {\n        this.posActual = posActual;\n    }\n    \n    setPosAnterior = function (posAnterior) {\n        this.posAnterior = posAnterior;\n    }\n    \n    updateLine = function(newPos) {\n        this.setPosAnterior(this.posActual);\n        this.setPosActual(newPos); \n    }\n    \n    setCanvas = function(canvas) {\n        this.ctx = canvas.getContext('2d');\n        this.canvas = canvas;\n    }\n\n}\nexport default Line;","import Line from \"./Line\";\n\nvar COMPOSITE_OPERATION_ERASE = 'destination-out';\nvar LINE_JOIN_ROUND = 'round';\nvar LINE_CAP_ROUND = 'round';\n\nclass Eraser extends Line {\n    constructor(width, color, posActual, posAnterior){\n        super(width, color, posActual, posAnterior);\n    }\n\n    draw = function() {\n        if(!this.canvas) { throw new Error('No se ha asignado un canvas a la linea')}\n        var rect = this.canvas.getBoundingClientRect();\n        var mouseX = this.posActual.x - rect.left;\n        var mouseY = this.posActual.y - rect.top;\n        var lastX = this.posAnterior.x;\n        var lastY = this.posAnterior.y;\n\n        this.ctx.globalCompositeOperation = COMPOSITE_OPERATION_ERASE;\n        this.ctx.moveTo(mouseX, mouseY);\n        this.ctx.lineTo(lastX, lastY);\n        //union de lineas round (mas natural)\n        this.ctx.lineJoin = LINE_JOIN_ROUND;\n        //forma de la linea\n        this.ctx.lineCap = LINE_CAP_ROUND;\n        this.ctx.lineWidth = this.width;\n        //dibuja lo que se ha hecho en el path\n        this.ctx.strokeStyle = this.color;\n        this.ctx.stroke();\n    }\n}\nexport default Eraser;","import Line from \"./Line\";\n\nvar COMPOSITE_OPERATION_BRUSH = 'source-over'; \nvar LINE_JOIN_ROUND = 'round';\nvar LINE_CAP_ROUND = 'round';\n\n class Brush extends Line {\n    constructor(width, color, posActual, posAnterior){\n        super(width, color, posActual, posAnterior);\n    }\n\n    draw = function() {\n        if(!this.canvas) { throw new Error('No se ha asignado un canvas a la linea')}\n        var rect = this.canvas.getBoundingClientRect();\n        var mouseX = this.posActual.x - rect.left;\n        var mouseY = this.posActual.y - rect.top;\n        var lastX = this.posAnterior.x;\n        var lastY = this.posAnterior.y;\n\n        this.ctx.globalCompositeOperation = COMPOSITE_OPERATION_BRUSH; \n\n        this.ctx.moveTo(mouseX, mouseY);\n        this.ctx.lineTo(lastX, lastY);\n        this.ctx.lineJoin = LINE_JOIN_ROUND;\n        this.ctx.lineCap = LINE_CAP_ROUND;\n        this.ctx.lineWidth = this.width;\n        this.ctx.strokeStyle = this.color;\n        this.ctx.stroke();\n    }\n}\nexport default Brush;\n","class Form {\n    constructor(width, color, posActual) {\n        if ((typeof posActual != 'object')) {\n            throw new Error('Posicion formato incorrecto( {x:x,y:y})')\n        }\n        this.width = width;\n        this.color = color;\n        this.posActual = posActual;\n    }\n\n    setWidth(width) {\n        this.width = width;\n    }\n    getWidth() {\n        return this.width;\n    }\n    getContext() {\n        return this.ctx;\n    }\n    getCanvas() {\n        return this.canvas;\n    }\n\n    setMode(mode) {\n        this.mode = mode;\n    }\n    setColor(color) {\n        this.color = color;\n    }\n    setPosActual(posActual) {\n        this.posActual = posActual;\n    }\n    setPosAnterior(posAnterior) {\n        this.posAnterior = posAnterior;\n    }\n    actualizarPos(newPos) {\n        this.setPosAnterior(this.posActual);\n        this.setPosActual(newPos); \n    }\n    setCanvas(canvas) {\n        this.ctx = canvas.getContext('2d');\n        this.canvas = canvas;\n    }\n}\n\nexport default Form;","import Form from './Form';\n\nvar COMPOSITE_OPERATION_FORM = 'source-over'; \nvar LINE_JOIN_ROUND = 'round';\nvar LINE_CAP_ROUND = 'round';\n\n class Rectangle extends Form {\n    constructor(width, color, posActual){\n        super(width, color, posActual);\n    }\n\n    draw() {\n        if(!this.canvas) { throw new Error('No se ha asignado un canvas a la linea')}\n        this.setAttributes();\n        this.makeRect();\n        this.ctx.stroke();\n    }\n\n    makeRect() {\n        var rect = this.canvas.getBoundingClientRect();\n        var mouseX = this.posActual.x - rect.left;\n        var mouseY = this.posActual.y - rect.top;\n        var lastX = this.posAnterior.x;\n        var lastY = this.posAnterior.y;\n        var height = mouseY - lastY;\n        var width = mouseX - lastX;\n        this.ctx.moveTo(mouseX, mouseY);\n        this.ctx.rect(lastX, lastY, width, height)\n    }\n\n    setAttributes() {\n        this.ctx.globalCompositeOperation = COMPOSITE_OPERATION_FORM; \n        this.ctx.lineWidth = this.width;\n        this.ctx.strokeStyle = this.color;\n    }\n\n}\nexport default Rectangle;\n","import Form from './Form';\n\nconst COMPOSITE_OPERATION_FORM = 'source-over'; \nconst STARTING_ANGLE = 0 * Math.PI;\nconst ENDING_ANGLE = 2 * Math.PI;\n\n class Circle extends Form {\n    constructor(width, color, posActual){\n        super(width, color, posActual);\n    }\n\n    draw() {\n        if(!this.canvas) { throw new Error('No se ha asignado un canvas a la linea')}\n        this.setAttributes();\n        this.makeCircle();\n        this.ctx.stroke();\n    }\n\n    makeCircle() {\n        var center = this.getCenter();\n        this.ctx.arc(center.x, center.y,center.radius, STARTING_ANGLE, ENDING_ANGLE);\n    }\n    getCenter() {\n        var rect = this.canvas.getBoundingClientRect();\n        var mouseX = this.posActual.x - rect.left;\n        var mouseY = this.posActual.y - rect.top;\n\n        var lastX = this.posAnterior.x;\n        var lastY = this.posAnterior.y;\n\n        var center = {\n            x: (mouseX + lastX) / 2,\n            y: (mouseY + lastY) / 2, \n            radius:(mouseY - lastY) / 2 \n        }\n        return center;\n    }\n\n    setAttributes() {\n        this.ctx.globalCompositeOperation = COMPOSITE_OPERATION_FORM; \n        this.ctx.lineWidth = this.width;\n        this.ctx.strokeStyle = this.color;\n\n    }\n\n}\nexport default Circle;\n","import Form from './Form';\n\nvar COMPOSITE_OPERATION_FORM = 'source-over'; \nvar LINE_JOIN_ROUND = 'round';\nvar LINE_CAP_ROUND = 'round';\n\n class StraightLine extends Form {\n    constructor(width, color, posActual){\n        super(width, color, posActual);\n    }\n\n    draw() {\n        if(!this.canvas) { throw new Error('No se ha asignado un canvas a la linea')}\n        this.setAttributes();\n        this.makeStraightLine();\n        this.ctx.stroke();\n    }\n\n    makeStraightLine() {\n        var rect = this.canvas.getBoundingClientRect();\n        var mouseX = this.posActual.x - rect.left;\n        var mouseY = this.posActual.y - rect.top;\n        var lastX = this.posAnterior.x;\n        var lastY = this.posAnterior.y;\n\n        this.ctx.moveTo(mouseX, mouseY);\n        this.ctx.lineTo(lastX, lastY);\n    }\n\n    setAttributes() {\n        this.ctx.globalCompositeOperation = COMPOSITE_OPERATION_FORM; \n        this.ctx.lineWidth = this.width;\n        this.ctx.strokeStyle = this.color;\n\n    }\n\n}\n\nexport default StraightLine;","import React from 'react';\nimport './DropDown.css';\nimport Rectangle from '../resources/background/Square.png';\nimport Circle from '../resources/background/Circle.png';\nimport StraightLine from '../resources/background/Line.png';\n\n\nclass DropDown extends React.Component {\n\n    constructor(props, context) { super(props, context)\n        this.state = {\n            popupOn: false,\n        }\n        this.popup = React.createRef();\n    }\n\n    handleClick = (event) => {\n        if(this.state.popupOn) {\n            this.popup.current.style.display = 'none';\n        } else {\n            this.popup.current.style.display = 'flex';\n        }\n        this.setState({ popupOn: !this.state.popupOn });\n    }\n    \n    changeImg = (elementId) => {\n        var aux = document.getElementById(elementId);\n        var drop = document.getElementById('imgDropDown');\n        drop.src = aux.src;    \n    }\n    \n    handleFormClicked = (event) => {\n        var clickedId = event.target.id;\n        console.log(clickedId);\n        this.changeImg(clickedId);\n        this.props.onFormClicked(clickedId);               \n    }\n\n    render() {\n        return (\n            <div ref={this.dropDownBox} className='DropDown box' onClick={(e) => {this.handleClick(e); }}>\n                <img id='imgDropDown'></img>\n                <div ref={this.popup} className='popup box'>\n                    <img id='rectangle' src={Rectangle} onClick={(e) => {this.handleFormClicked(e)}}></img>\n                    <img id='circle' src={Circle} onClick={(e) => {this.handleFormClicked(e)}}></img>\n                    <img id='straightLine' src={StraightLine} onClick={(e) => {this.handleFormClicked(e)}}></img>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default DropDown;\n","\nimport React from 'react';\nimport './Toolbar.css';\nimport CircleWidth from './CircleWidth';\nimport ColorPicker from './ColorPicker';\nimport arrow from '../resources/background/Arrowwhite.png';\nimport Eraser from '../BusinessLogic/Eraser';\nimport Brush from '../BusinessLogic/Brush';\nimport Rectangle from '../BusinessLogic/Rectangle';\nimport Circle from '../BusinessLogic/Circle';\nimport StraightLine from '../BusinessLogic/StraightLine';\nimport DropDown from './DropDown';\n\nvar TOOL_STROKE_COLOR ='#94d3ac';\nvar TOOL_DEFAULT_STROKE_COLOR ='white';\nvar CONFIG_DISPLAY = 'flex';\n\nvar BRUSH_DEFAULT_CONFIG= {\n    width: 5,\n    color: 'black',\n\n}\nvar ERASER_DEFAULT_CONFIG = {\n    width: 20,\n    color: 'black',\n}\n\nvar FORM_DEFAULT_CONFIG = {\n    type: 'rectangle',\n    width: 3,\n    color: 'black',\n}\n\nvar pos = {\n    x: 0,\n    y: 0\n}\n\nvar posa = {\n    x: 100,\n    y: 100\n}\n\nclass Toolbar extends React.Component {\n    constructor(props, context) {\n        super(props, context)\n        var line = new Brush(BRUSH_DEFAULT_CONFIG.width, BRUSH_DEFAULT_CONFIG.width, pos, posa);\n        var lineErase = new Eraser(ERASER_DEFAULT_CONFIG.width, ERASER_DEFAULT_CONFIG.width, pos, posa);\n        var circle = new Circle(FORM_DEFAULT_CONFIG.width, FORM_DEFAULT_CONFIG.color, pos);\n        var rectangle = new Rectangle(FORM_DEFAULT_CONFIG.width, FORM_DEFAULT_CONFIG.color, pos);\n        var straightLine = new StraightLine(FORM_DEFAULT_CONFIG.width, FORM_DEFAULT_CONFIG.color, pos);\n        var forms = {\n            circle: circle,\n            rectangle: rectangle,\n            straightLine: straightLine,\n        }\n        var tools = [line, lineErase, rectangle];\n        this.state = {\n            isDown: false,\n            tool: 'Brush',\n            line: line,\n            lineErase: lineErase,\n            form: rectangle,\n            forms: forms,\n            tools: tools,\n        }\n    }\n\n    componentDidMount() {\n        this.setState({\n            lastTool: document.querySelector('#Brush'),\n        });\n        document.querySelector('#Brush').style.stroke = TOOL_STROKE_COLOR;\n        this.hideConfig();\n    }\n    \n    reset = event => {\n        this.props.onResetCanvas();\n    }\n\n    setTool = (event, tool) => {\n        this.changeLastToolColor();\n        this.setState({\n            tool: tool,\n            lastTool: document.querySelector('#' + tool)\n\n        });\n        this.changeTool(tool);\n        document.querySelector('#' + tool).style.stroke = TOOL_STROKE_COLOR;\n    }\n    changeLastToolColor = () => {\n        var tool = this.state.lastTool;\n        tool.style.stroke = TOOL_DEFAULT_STROKE_COLOR;\n    }\n    //Event es el objecto CircleWidth\n    handleWidthChange = (event, tool) => {\n        if(tool === 'Brush') {\n            this.state.line.setWidth(event.state.width)\n        } else if(tool === 'Form') {\n            this.state.form.setWidth(event.state.width)\n        } else if(tool ==='Eraser') {\n            this.state.lineErase.setWidth(event.state.width)\n        }\n    }\n\n    handleColorChange = (color, tool) => {\n        if(tool === 'Brush') {\n            this.state.line.setColor(color.hex);\n        } else if(tool === 'Form') {\n            this.state.form.setColor(color.hex);\n        }\n    }\n\n    changeTool = (tool) => {\n        this.props.onToolChange(tool);\n    }\n\n    hideConfig = () => {\n        var configs = document.querySelectorAll('.config');\n        configs.forEach(element => {\n           element.style.display = 'none'; \n        });\n    }\n    handleArrowOpen = event => {\n        this.hideConfig();\n        switch (event.target.id) {\n            case 'brush-arrow':\n                var config = document.querySelector('#brush-config');\n                config.style.display = CONFIG_DISPLAY;\n                break;\n            case 'eraser-arrow':\n                var configEraser = document.querySelector('#eraser-config');\n                configEraser.style.display = CONFIG_DISPLAY;\n                break;\n            case 'form-arrow':\n                var configForm = document.querySelector('#form-config');\n                configForm.style.display = CONFIG_DISPLAY;\n                break;\n        }\n    }\n    getTools = () => {\n        var tools = {\n            line: this.state.line,\n            lineErase: this.state.lineErase,\n            form: this.state.form, \n        }\n        return tools;\n    }\n\n    handleFormClicked = (form) => {\n        var newForm = this.state.forms[form];\n        console.log(form)\n        console.log(newForm)\n        this.setState({ form: newForm, });\n        this.props.onFormChanged(newForm);\n    }\n\n    render() {\n        return (\n            <div className=\"Toolbar-wrapper\">\n                <div id='brush-config' className='config'>\n                    <CircleWidth onValueChange={(e) => { this.handleWidthChange(e, 'Brush'); }}\n                        width={this.state.line.getWidth()}\n                    />\n                    <ColorPicker onColorChange={(color) => {this.handleColorChange(color, 'Brush');}} />\n                </div>\n                <div id='form-config' className='config'>\n                    <DropDown onFormClicked={(form) => { this.handleFormClicked(form); }} />\n                    <CircleWidth onValueChange={(e) => { this.handleWidthChange(e, 'Form'); }}\n                        width={this.state.form.width}\n                    />\n                    <ColorPicker onColorChange={(color) => {this.handleColorChange(color, 'Form');}} />\n                </div>\n                <div id='eraser-config' className='config'>\n                    <CircleWidth onValueChange={(e) => { this.handleWidthChange(e, 'Eraser'); }}\n                        width={this.state.line.getWidth()}\n                    />\n                </div>\n                <div className='toolbar'>\n                    <div className='tool-container'>\n                        <button onClick={(e) => { this.setTool(e, 'Brush'); }}>\n                            <svg width=\"42\" height=\"215\" viewBox=\"0 0 42 215\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                <g filter=\"url(#filter0_d)\">\n                                    <path ref={this.toolBrush} id='Brush' className='tool' d=\"M5 206V49L21 2L37 49V206H5Z\" stroke=\"black\" />\n                                </g>\n                                <defs>\n                                    <filter id=\"filter0_d\" x=\"0.5\" y=\"0.448471\" width=\"41\" height=\"214.052\" filterUnits=\"userSpaceOnUse\" color-interpolation-filters=\"sRGB\">\n                                        <feFlood flood-opacity=\"0\" result=\"BackgroundImageFix\" />\n                                        <feColorMatrix in=\"SourceAlpha\" type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" />\n                                        <feOffset dy=\"4\" />\n                                        <feGaussianBlur stdDeviation=\"2\" />\n                                        <feColorMatrix type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0\" />\n                                        <feBlend mode=\"normal\" in2=\"BackgroundImageFix\" result=\"effect1_dropShadow\" />\n                                        <feBlend mode=\"normal\" in=\"SourceGraphic\" in2=\"effect1_dropShadow\" result=\"shape\" />\n                                    </filter>\n                                </defs>\n                            </svg>\n                        </button>\n                        <img src={arrow} onClick={(e) => { this.handleArrowOpen(e); }} className='toolarrow' id='brush-arrow'></img>\n                    </div>\n                    <div className='tool-container'>\n                        <button onClick={(e) => { this.setTool(e, 'Form'); }}>\n                            <svg width=\"102\" height=\"102\" viewBox=\"0 0 102 102\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                <path ref={this.toolForm} id='Form' className='tool' d=\"M101 1H1V101H101V1Z\" stroke=\"black\" />\n                            </svg>\n                        </button>\n                        <img src={arrow} onClick={(e) => { this.handleArrowOpen(e); }} className='toolarrow' id='form-arrow'></img>\n                    </div>\n\n                    <div className='tool-container'>\n                        <button onClick={(e) => { this.setTool(e, 'Eraser'); }}> <svg width=\"91\" height=\"179\" viewBox=\"0 0 91 179\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <g filter=\"url(#filter0_i)\">\n                                <path ref={this.toolEraser} id='Eraser' className='tool' d=\"M1 118V24C47 -27 90 24 90 24V118M1 118V154C45.5 207 90 154 90 154V118M1 118H90\" stroke=\"black\" />\n                            </g>\n                            <defs>\n                                <filter id=\"filter0_i\" x=\"0.5\" y=\"0.833313\" width=\"90\" height=\"181.222\" filterUnits=\"userSpaceOnUse\" color-interpolation-filters=\"sRGB\">\n                                    <feFlood flood-opacity=\"0\" result=\"BackgroundImageFix\" />\n                                    <feBlend mode=\"normal\" in=\"SourceGraphic\" in2=\"BackgroundImageFix\" result=\"shape\" />\n                                    <feColorMatrix in=\"SourceAlpha\" type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\" result=\"hardAlpha\" />\n                                    <feOffset dy=\"4\" />\n                                    <feGaussianBlur stdDeviation=\"2\" />\n                                    <feComposite in2=\"hardAlpha\" operator=\"arithmetic\" k2=\"-1\" k3=\"1\" />\n                                    <feColorMatrix type=\"matrix\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0\" />\n                                    <feBlend mode=\"normal\" in2=\"shape\" result=\"effect1_innerShadow\" />\n                                </filter>\n                            </defs>\n                        </svg>\n                        </button>\n                        <img src={arrow} onClick={(e) => { this.handleArrowOpen(e); }} className='toolarrow' id='eraser-arrow'></img>\n                    </div>\n                    <div className='tool-container'>\n                        <button onClick={(e) => { this.reset(e) }}>\n                            <svg width=\"52\" height=\"52\" viewBox=\"0 0 52 52\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                <path id='removeall' className='tool' d=\"M1 1L51 51M1 51L51 1\" stroke=\"black\" />\n                            </svg>\n                        </button>\n                    </div>\n                </div>\n            </div>\n\n        );\n    }\n}\n\nexport default Toolbar;\n","const axios = require('axios');\n\nconst url = 'http://localhost:7000/api/create_room'\n\nclass RoomCreator {\n    constructor(offer) {\n        this.offer = offer;\n    }\n    createRoom() {\n        let data = {\n            _id: 1,\n            offer: this.offer\n        }\n        let res = axios.post(url, data);\n        return res;\n    }\n}\n\nexport default RoomCreator;","const axios = require('axios');\n\nconst url = 'http://localhost:7000/api/get_room'\n\nclass RoomReceiver {\n    constructor(offer) {\n        this.offer = offer;\n    }\n    receiveRoom() {\n        let params = {\n            params: { \n                id: 1\n            }\n        }\n        let res = axios.get(url, params);\n        return res;\n    }\n}\n\nexport default RoomReceiver;","import Peer from 'simple-peer';\nimport wrtc from 'wrtc'\nimport RoomCreator from '../Persistence/RoomCreator'\nimport RoomReceiver from '../Persistence/RoomReceiver';\n\nconst constraints = window.constraints = {\n\tvideo: true,\n\taudio: true\n}\n\nclass VoiceConnection {\n\n\tconstructor(localVideo) {\n\t\tconsole.log(localVideo)\n\t\tvar stream = navigator.mediaDevices.getUserMedia(constraints);\n\t\tconsole.log(typeof stream)\n\t\tconsole.log(stream)\n\t\twindow.stream = stream;\n\t\tlocalVideo.srcObject = stream;\n\t}\n\n\taddStream = function (stream) {\n\t\tthis.peer.addStream(stream)\n\t}\n}\n\nexport default VoiceConnection;\n","import io from 'socket.io-client';\nimport adapter from 'webrtc-adapter';\nimport ws from 'ws';\nimport EventEmitter from 'events'\nconsole.log(adapter.browserDetails.browser)\nconsole.log(adapter.browserDetails.version)\n\nconst mediaConstraints = { \n\tvideo: {width:200,height:200},\n\taudio: true \n}\nconst wait = ms => new Promise(resolve => setTimeout(resolve, ms));\n\nvar makingOffer = false;\nvar ignoreOffer = false;\nvar polite = false;\n\nclass RoomConnection extends EventEmitter{\n\tconstructor(socket) {\n\t\tsuper();\n\t\tthis.localPeerConnection = new RTCPeerConnection({\n\t\t\ticeServers: [\n\t\t\t\t{urls: 'stun:stun.l.google.com:19302'},\n\t\t\t],\n\t\t\tofferToReceiveVideo: true,\n\t\t\tofferToReceiveAudio: true,\n\t\t});\n\t\tthis.socket = socket;\n\t}\n\n\tconnect = async (room) => {\n\t\tvar localVideo = document.querySelector(\"#localVideo\");\n\t\ttry{\n\t\t\t//let constraints = await this.getMediaConstraints();\n\t\t\tconst stream = await navigator.mediaDevices.getUserMedia(mediaConstraints);\n\t\t\tfor(const track of stream.getTracks()) {\n\t\t\t\tthis.localPeerConnection.addTrack(track, stream);\n\t\t\t}\n\t\t\tlocalVideo.srcObject = stream;\t\t\n\t\t\tlocalVideo.play()\n\t\t\tlocalVideo.style.display = 'inherit'\n\t\t} catch(error) {\n\t\t\tconsole.error(error);\n\t\t}\n\t\tthis.setSocketEvents();\n\t\tthis.localPeerConnection.ontrack = this.onTrackHandler;\n\t\tthis.localPeerConnection.onnegotiationneeded = this.handleNegotation;\n\t\tthis.localPeerConnection.addEventListener('icecandidate', this.handleConnection);\n\t\tthis.iceCandidates = []\n\t}\n\n\thandleNegotation = async () => {\n\t\t//this.createOffer()\n\n\t\ttry {\n\t\t\tmakingOffer = true\n\t\t\tvar offer = await this.localPeerConnection.createOffer();\n\t\t\tawait this.localPeerConnection.setLocalDescription(offer);\n\t\t\tthis.socket.emit('offer', this.localPeerConnection.localDescription);\n\t\t} catch(error) {\n\t\t\tconsole.log(error);\n\t\t} finally {\n\t\t\tmakingOffer = false\n\t\t}\n\t}\n\tonTrackHandler = (event) => {\n\t\tvar remoteVideo = document.querySelector(\"#remoteVideo\");\n\t\tevent.track.onunmute = () => {\n\t\t\tif(remoteVideo.srcObject) return;\n\t\t\tremoteVideo.srcObject = event.streams[0];\n\t\t\tremoteVideo.play()\n\t\t\tremoteVideo.style.display = 'inherit'\n\t\t}\n\t\t//remoteVideo.srcObject = event.streams[0];\n\t\t//this.localPeerConnection.addTrack(event.track, event.streams[0]);\n\t}\n\n\tsetSocketEvents = () => {\n\t\tthis.socket.on('messages', async (description, candidate) => {\n\t\t\ttry{\n\t\t\t\tif(description) {\n\t\t\t\t\tlet offerCollision = description.type == 'offer' && \n\t\t\t\t\t\t\t\t\t\t\t(makingOffer ||\n\t\t\t\t\t\t\t\t\t\t\tthis.localPeerConnection.signalingState != 'stable');\n\t\t\t\t\tignoreOffer = !polite && offerCollision;\n\t\t\t\t\tif(ignoreOffer) {\n            console.log('ignored')\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tawait this.localPeerConnection.setRemoteDescription(description)\n\t\t\t\t\tif(description.type == 'offer') {\n\t\t\t\t\t\tlet answer = await this.localPeerConnection.createAnswer();\n\t\t\t\t\t\tawait this.localPeerConnection.setLocalDescription(answer);\n\t\t\t\t\t\tthis.socket.emit('answer', this.localPeerConnection.localDescription);\n\t\t\t\t\t}\n\t\t\t\t} else if(candidate) {\n\t\t\t\t\ttry{\n\t\t\t\t\t\tawait this.localPeerConnection.addIceCandidate(candidate);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tif(!ignoreOffer) throw error;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch(error) {\n\t\t\t\tconsole.error(error);\n\t\t\t}\n\t\t});\n\t\tthis.socket.on('connect', function(data) {\n\t\t\tconsole.log(data);\n\t\t});\n\t\tthis.socket.on('connect_error', function(data) {\n\t\t\tconsole.log(data);\n\t\t});\n\t\tthis.socket.on('error', function(data) {\n\t\t\tconsole.log(data);\n\t\t});\n\n\t\tthis.socket.on('created', async (room, socketId) => {\n      console.log('created')\n\t\t\tpolite = true;\n\t\t});\n\n\t\tthis.socket.on('joined', (room, socketId, offer) => {\n\t\t});\n\n\t\tthis.socket.on('answer', (room, socketId, answer) => {\n\t\t\tvar rtcDescription = new RTCSessionDescription(answer);\n\t\t\tthis.gotAnswer(rtcDescription);\n\t\t});\n\n\t\tthis.socket.on('newicecandidates', (room, socketId, iceCandidates) => {\n\t\t\tconsole.log('newicecandidates');\n\t\t\tconsole.log(iceCandidates);\n\t\t\tthis.addIceCandidates(iceCandidates);\n\t\t});\n    this.socket.emit('listening');\n\t}\n\n\tgotLocalMediaStream = stream => {\n\t\tvar localVideo = document.querySelector(\"#localVideo\");\n\t\tfor (const track of stream.getTracks()) {\n\t\t\tthis.localPeerConnection.addTrack(track, stream);\n\t\t}\n\t\tlocalVideo.srcObject = stream;\n\t\tlocalVideo.play();\n\t\tthis.localPeerConnection.addStream(stream);\n\t}\n\n\thandleLocalMediaStreamError = error => {\n\t\tconsole.log(error);\n\t}\n\n\thandleConnection = event => {\n\t\tconst peerConnection = event.target;\n\t\tconst iceCandidate = event.candidate;\n\t\tthis.socket.emit('icecandidate', iceCandidate);\n\t}\n\n\taddIceCandidates = (iceCandidates) => {\n\t\tfor(let i = 0; i < iceCandidates.length; i++) {\n\t\t\tvar candidate = iceCandidates[i];\n\t\t\tthis.addIceCandidate(candidate);\n\t\t}\n\t}\n\n\taddIceCandidate = (candidate) => {\n\t\tthis.localPeerConnection.addIceCandidate(candidate)\n\t\t\t.then(() => {\n\t\t\t\tthis.handleConnectionSuccess(this.localPeerConnection);\n\t\t\t}).catch((error) => {\n\t\t\t\tthis.handleConnectionFailure(this.localPeerConnection, error);\n\t\t\t});\n\t}\n\n\thandleConnectionSuccess = (peer) =>{\n\t\tconsole.log('handle connection success')\n\t}\n\n\thandleConnectionFailure = () =>{\n\t\tconsole.log('handle connection failure')\n\t}\n\n\tsetDataChannelEvents = () => {\n\t\tthis.dataChannel.onmessage = (message) => { console.log(message) };\n\t}\n\n\tgetLocalSocket = () => {\n\t\tvar socket = io.connect('ws://localhost:8000',\n\t\t\t{\n\t\t\t\treconnect: true,\n\t\t\t\ttransports: ['websocket'],\n\t\t\t\tpath: '/socket.io'\n\t\t\t}\n\t\t);\n\t\treturn socket\n\t}\n\n\tgetRemoteSocket = () => {\n\t\tvar socket = io.connect('wss://pizarrabackend.herokuapp.com',\n\t\t\t{\n\t\t\t\treconnect: true,\n\t\t\t\ttransports: ['websocket'],\n\t\t\t\tpath: '/socket.io',\n\t\t\t\tprotocol: window.location.protocol === 'https:' ? 'wss' : 'ws',\n\n\t\t\t}\n\t\t);\n\t\treturn socket\n\t}\n\tgetMediaConstraints = async () => {\n\t\tlet permissions = await this.getMediaPermissions();\t\n\t\tif(permissions.video) {\n\t\t\tpermissions.video = {width:200,height:200}\n\t\t} \n\t\treturn permissions\n\t}\n\tgetMediaPermissions = async () => {\n\t\tlet permissions = {}\n\t\tlet video;\n\t\tlet audio; \n\t\tawait navigator.permissions.query({name: \"camera\"})\n\t\t\t.then((result) => {video = result.state});\n\t\tawait navigator.permissions.query({name: \"microphone\"})\n\t\t\t.then((result) => {audio = result.state});\n\t\taudio = this.getDevicePermissions(audio);\n\t\tvideo = this.getDevicePermissions(video);\n\t\tpermissions['video'] = video\n\t\tpermissions['audio'] = audio\n\t\treturn permissions\n\t}\n\tgetDevicePermissions = (media) => {\n\t\treturn media == 'granted' ? true : false;\t\n\t}\n}\n\nexport default RoomConnection;\n","import io from 'socket.io-client';\nimport adapter from 'webrtc-adapter';\nimport ws from 'ws';\nimport EventEmitter from 'events'\nconsole.log(adapter.browserDetails.browser)\nconsole.log(adapter.browserDetails.version)\n\nconst mediaConstraints = { \n\tvideo: {width:200,height:200},\n\taudio: true \n}\nconst wait = ms => new Promise(resolve => setTimeout(resolve, ms));\n\nvar makingOffer = false;\nvar ignoreOffer = false;\nvar polite = false;\n\nclass DataConnection extends EventEmitter{\n\tconstructor(socket) {\n\t\tsuper();\n\t\tthis.localPeerConnection = new RTCPeerConnection({\n\t\t\ticeServers: [\n\t\t\t\t{urls: 'stun:stun.l.google.com:19302'},\n\t\t\t],\n\t\t});\n\t\tthis.socket = socket;\n\t}\n\n\tconnect = async (room) => {\n\t\tthis.setSocketEvents();\n\t\tthis.dataChannel = this.localPeerConnection.createDataChannel(\"data\", {\"negotiated\":true, \"id\":0});\n\t\tthis.dataChannel.onopen = () => {this.connected = true;}\n\t\tthis.dataChannel.onmessage = (data) => {this.handleDataMessage(data);}\n\t\tthis.localPeerConnection.onnegotiationneeded = this.handleNegotation;\n\t\tthis.localPeerConnection.addEventListener('icecandidate', this.handleConnection);\n\t}\n\n\thandleNegotation = async () => {\n\t\ttry {\n\t\t\tlet offer = await this.localPeerConnection.createOffer();\n\t\t\tawait this.localPeerConnection.setLocalDescription(offer);\n\t\t\tthis.socket.emit('dataoffer', this.localPeerConnection.localDescription);\n\t\t} catch(error) {\n\t\t\tconsole.error(error);\n\t\t}\n\t}\n\tupdateCanvas = (canvas) => {\n\t\tthis.sendData('canvas', canvas);\n\t}\n\tsendData = (type, data) => {\n\t\tif(this.connected) {\n\t\t\tthis.dataChannel.send(JSON.stringify({\"type\": type, \"data\": data}));\n\t\t}\n\t}\n\thandleDataMessage = (message) => {\n\t\tvar data = JSON.parse(message.data);\n\t\tif(data.type == \"canvas\") {\n\t\t\tthis.emit('canvas', data.data);\n\t\t}\n\t}\n\n\thandleConnection = event => {\n\t\tconst peerConnection = event.target;\n\t\tconst iceCandidate = event.candidate;\n\t\tthis.socket.emit('dataicecandidate', iceCandidate);\n\t}\n\tsetSocketEvents = () => {\n\t\tthis.socket.on('datamessages', async (description, candidate) => {\n\t\t\ttry{\n\t\t\t\tif(description) {\n\t\t\t\t\tawait this.localPeerConnection.setRemoteDescription(description)\n\t\t\t\t\tif(description.type == 'offer') {\n\t\t\t\t\t\tlet answer = await this.localPeerConnection.createAnswer();\n\t\t\t\t\t\tawait this.localPeerConnection.setLocalDescription(answer);\n\t\t\t\t\t\tthis.socket.emit('dataanswer', this.localPeerConnection.localDescription);\n\t\t\t\t\t}\n\t\t\t\t} else if(candidate) {\n\t\t\t\t\ttry{\n\t\t\t\t\t\tawait this.localPeerConnection.addIceCandidate(candidate);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tif(!ignoreOffer) throw error;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch(error) {\n\t\t\t\tconsole.error(error);\n\t\t\t}\n\t\t});\n\n\n\t\tthis.socket.on('connect', function(data) {\n\t\t\tconsole.log(data);\n\t\t});\n\t\tthis.socket.on('connect_error', function(data) {\n\t\t\tconsole.log(data);\n\t\t});\n\t\tthis.socket.on('error', function(data) {\n\t\t\tconsole.log(data);\n\t\t});\n\n\t\tthis.socket.on('created', async (room, socketId) => {\n\t\t\tpolite = true;\n\t\t});\n\n\t\tthis.socket.on('joined', (room, socketId, offer) => {\n\t\t});\n\n\t\tthis.socket.on('dataanswer', (room, socketId, answer) => {\n\t\t\tvar rtcDescription = new RTCSessionDescription(answer);\n\t\t\tthis.gotAnswer(rtcDescription);\n\t\t});\n\n\t\tthis.socket.on('datanewicecandidates', (room, socketId, iceCandidates) => {\n\t\t\tthis.addIceCandidates(iceCandidates);\n\t\t});\n\n\t}\n\n\n\n\taddIceCandidates = (iceCandidates) => {\n\t\tfor(let i = 0; i < iceCandidates.length; i++) {\n\t\t\tvar candidate = iceCandidates[i];\n\t\t\tthis.addIceCandidate(candidate);\n\t\t}\n\t}\n\n\taddIceCandidate = (candidate) => {\n\t\tthis.localPeerConnection.addIceCandidate(candidate)\n\t\t\t.then(() => {\n\t\t\t\tthis.handleConnectionSuccess(this.localPeerConnection);\n\t\t\t}).catch((error) => {\n\t\t\t\tthis.handleConnectionFailure(this.localPeerConnection, error);\n\t\t\t});\n\t}\n\n\thandleConnectionSuccess = (peer) =>{\n\t\tconsole.log('handle connection success')\n\t}\n\n\thandleConnectionFailure = () =>{\n\t\tconsole.log('handle connection failure')\n\t}\n\n\tsetDataChannelEvents = () => {\n\t\tthis.dataChannel.onmessage = (message) => { console.log(message) };\n\t}\n\n\tgetLocalSocket = () => {\n\t\tvar socket = io.connect('ws://localhost:8000',\n\t\t\t{\n\t\t\t\treconnect: true,\n\t\t\t\ttransports: ['websocket'],\n\t\t\t\tpath: '/socket.io'\n\t\t\t}\n\t\t);\n\t\treturn socket\n\t}\n\n\tgetLocalConnection = () => {\n\t\tvar socket = io.connect('ws://localhost:8000',\n\t\t\t{\n\t\t\t\treconnect: true,\n\t\t\t\ttransports: ['websocket'],\n\t\t\t\tpath: '/socket.io',\n\t\t\t\tprotocol: window.location.protocol === 'https:' ? 'wss' : 'ws',\n\n\t\t\t}\n\t\t);\n\t\treturn socket\n\t}\n\tgetRemoteSocket = () => {\n\t\tvar socket = io.connect('wss://pizarrabackend.herokuapp.com',\n\t\t\t{\n\t\t\t\treconnect: true,\n\t\t\t\ttransports: ['websocket'],\n\t\t\t\tpath: '/socket.io',\n\t\t\t\tprotocol: window.location.protocol === 'https:' ? 'wss' : 'ws',\n\n\t\t\t}\n\t\t);\n\t\treturn socket\n\t}\n\tgetMediaConstraints = async () => {\n\t\tlet permissions = await this.getMediaPermissions();\t\n\t\tif(permissions.video) {\n\t\t\tpermissions.video = {width:200,height:200}\n\t\t} \n\t\treturn permissions\n\t}\n\tgetMediaPermissions = async () => {\n\t\tlet permissions = {}\n\t\tlet video;\n\t\tlet audio; \n\t\tawait navigator.permissions.query({name: \"camera\"})\n\t\t\t.then((result) => {video = result.state});\n\t\tawait navigator.permissions.query({name: \"microphone\"})\n\t\t\t.then((result) => {audio = result.state});\n\t\taudio = this.getDevicePermissions(audio);\n\t\tvideo = this.getDevicePermissions(video);\n\t\tpermissions['video'] = video\n\t\tpermissions['audio'] = audio\n\t\treturn permissions\n\t}\n\tgetDevicePermissions = (media) => {\n\t\treturn media == 'granted' ? true : false;\t\n\t}\n}\n\nexport default DataConnection;\n","import React from 'react';\nimport './RoomConnection.css';\nimport roomConnection from '../BusinessLogic/RoomConnection';\nimport dataConnection from '../BusinessLogic/DataConnection';\nimport EventEmitter from 'events'\nimport io from 'socket.io-client';\n\nclass RoomConnection extends React.Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.state = {\n\t\t\troom: props.room\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.initializeConnection();\n\t\tthis.connect(this.state.room);\n\t}\n\n\tinitializeConnection() {\n\t\tvar localVideo = document.querySelector(\"#localVideo\");\n\t\tvar remoteVideo = document.querySelector(\"#remoteVideo\");\n\t\tconsole.log(remoteVideo, localVideo);\n    this.socket = this.getRemoteSocket();\n\t\tthis.connection = new roomConnection(this.socket);\n\t\tthis.dataConnection = new dataConnection(this.socket);\n    this.dataConnection.on('canvas', (canvas) => { this.props.onCanvasUpdate(canvas);});\n\t\t\n\t}\n\n  updateCanvas = (canvasImg) => {\n    this.dataConnection.updateCanvas(canvasImg);\n  }\n\n\tgetLocalSocket = () => {\n\t\tvar socket = io.connect('ws://localhost:8000',\n\t\t\t{\n\t\t\t\treconnect: true,\n\t\t\t\ttransports: ['websocket'],\n\t\t\t\tpath: '/socket.io'\n\t\t\t}\n\t\t);\n\t\treturn socket\n\t}\n\n\tgetRemoteSocket = () => {\n\t\tvar socket = io.connect('wss://pizarrabackend.herokuapp.com',\n\t\t\t{\n\t\t\t\treconnect: true,\n\t\t\t\ttransports: ['websocket'],\n\t\t\t\tpath: '/socket.io',\n\t\t\t\tprotocol: window.location.protocol === 'https:' ? 'wss' : 'ws',\n\n\t\t\t}\n\t\t);\n\t\treturn socket\n\t}\n\n\tconnect = (room) => {\n\t\tconsole.log(room)\n    this.socket.emit('joinroom', room);\n\t\tthis.connection.connect(room);\n\t\tthis.dataConnection.connect(room);\n\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div id='room'>\n\t\t\t\t<video id='localVideo' className='box' muted></video>\n\t\t\t\t<video id='remoteVideo' className='box'></video>\n\t\t\t\t<audio id='remoteAudio'></audio>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default RoomConnection;\n","import React from 'react';\nimport './Board.css';\nimport Toolbar from './Toolbar';\nimport VoiceConnection from '../BusinessLogic/VoiceConnection';\nimport RoomConnection from './RoomConnection';\n\n\n\nfunction getMousePos(canvas, evt) {\n\treturn {\n\t\tx: evt.clientX,\n\t\ty: evt.clientY\n\t};\n}\n\nconst constraints = window.constraints = {\n\tvideo: true,\n\taudio: true\n}\n\nclass Board extends React.Component {\n\n\tconstructor(props, context) {\n\t\tsuper(props, context)\n\t\tthis.initializeRefs();\t\t\n\t\tthis.state = {\n\t\t\tisDown: false,\n\t\t\ttool: 'Brush',\n\t\t\troom: props.room,\n\t\t\tpushArray: new Array(15),\n\t\t\tpos: 0,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tvar tools = this.toolbar.current.getTools();\n\t\tvar line = tools.line;\n\t\tvar lineErase = tools.lineErase;\n\t\tvar form = tools.form;\n\t\tthis.setState({\n\t\t\tcanvas: this.canvas.current,\n\t\t\tline: line,\n\t\t\tlineErase: lineErase,\n\t\t\tform: form,\n\t\t\ttools: tools,\n\t\t});\n\t\tthis.setToolsCanvas(this.getCanvas());\n\t\tthis.setListener();\t\t\n\t}\n\n\tsetListener = () => {\t\t\t\t\n\t\tdocument.addEventListener('keydown', (e) => this.isKeysCombination(e));\n\t}\n\n\tisKeysCombination = (event) => {\t\t\n\t\tif (event.ctrlKey && event.key === 'z') {\n\t\t\tthis.canvasUndo();\t\t\t\t\t\n\t\t}\n\t\telse if (event.ctrlKey && event.key === 'y') {\n\t\t\tthis.canvasRedo();\n\t\t}\t\n\t}\n\n\tcanvasPush = () => {\t\t\n\t\tvar lastCanvasImg = document.getElementById('Board').toDataURL();\t\t\n    this.roomConnection.current.updateCanvas(lastCanvasImg);\n\t\tif(this.state.pos == 0) {\t\t\t\t\t\n\t\t\tthis.updatePushArray(lastCanvasImg);\t\t\t\n\t\t}\n\t\telse {\n\t\t\tthis.removeUnusedElements(lastCanvasImg);\n\t\t\tthis.setState({ pos: 0, });\n\t\t}\t\t\n\t}\n\n\ttoStringCanvas = () => {\n\t\tvar aux = this.state.pushArray;\n\t\tfor(var i = 0; i < aux.length; i++) { \n\t\t\tconsole.log(i);\n\t\t\tconsole.log(aux[i]); \n\t\t}\n\t}\n\n\tupdatePushArray = (lastCanvas) => {\n\t\tvar aux = new Array(this.state.pushArray.length);\n\t\taux[0] = lastCanvas;\n\t\tfor (var i = 1; i < this.state.pushArray.length; i++) {\n\t\t\taux[i] = this.state.pushArray[i-1];\n\t\t}\n\t\tthis.setState({\n\t\t\tpushArray: aux,\n\t\t});\n\t}\n\n\tremoveUnusedElements = (lastCanvasImg) => {\n\t\tvar aux = this.state.pushArray;\n\t\tvar pos = aux.length - (aux.length - this.state.pos);\t\t\n\t\taux[0] = lastCanvasImg;\n\t\tfor (var i = 1; i < aux.length; i++) {\n\t\t\tif (aux.length > pos+i) {\n\t\t\t\taux[i] = this.state.pushArray[pos+i-1]; \n\t\t\t}\n\t\t\telse {\n\t\t\t\taux[i] = undefined;\n\t\t\t}\t\t\t\n\t\t}\n\t\tthis.setState({\n\t\t\tpushArray: aux,\n\t\t})\n\t}\t\n\n\tcanvasUndo = () => {\t\t\t\n\t\tvar posAux = this.state.pos;\n\t\tvar aux = this.state.pushArray;\t\t\n\t\tif (posAux < aux.length) {\n\t\t\tlet ctx = this.state.canvas.getContext(\"2d\");\t\t\t\t\t\t\t\t\t\n\t\t\tlet canvasImg = new Image();\n\t\t\tposAux++;\n\t\t\tif (aux[posAux] != undefined) {\t\t\t\t\t\t\t\n        this.updateCanvas(aux[posAux]);\n\t\t\t}\t\t\t\t\t\t\n\t\t\tthis.setState({\n\t\t\t\tpos: posAux,\t\t\t\t\n\t\t\t})\n\t\t}\n\t\t\n\n\t}\n\n\tcanvasRedo = () => {\t\t\n\t\tvar posAux = this.state.pos;\n\t\tvar aux = this.state.pushArray;\t\t\n\t\tif (posAux > 0) {\n\t\t\tposAux--;\n\t\t\tif (aux[posAux] != undefined) {\t\t\t\t\t\t\t\t\t\t\t\t\n        this.updateCanvas(aux[posAux]);\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tpos: posAux,\t\t\t\n\t\t\t});\t\t\n\t\t}\t\t\n\t}\n\n  updateCanvas = (canvasImgReceived) => {\n\t\tlet ctx = this.state.canvas.getContext('2d');\n    var canvasImg = new Image();\t\t\t\t\n    canvasImg.addEventListener('load', e => {\n      this.reset();\n      ctx.drawImage(canvasImg,0,0);\t\t\t\t\t\n    });\t\t\t\t\t\n    canvasImg.src = canvasImgReceived;\t\t\t\t\t\t\t\t\t\t\t\t\n  }\n\n\t\n\n\tinitializeRefs = () => {\n\t\tthis.canvas = React.createRef();\n\t\tthis.toolBrush = React.createRef();\n\t\tthis.toolEraser = React.createRef();\n\t\tthis.toolForm = React.createRef();\n\t\tthis.toolbar = React.createRef();\n    this.roomConnection = React.createRef();\n\n\t}\n\n\tgetCanvas = () => {\n\t\treturn this.canvas;\n\t}\n\n\tgetTools = () => {\n\t\treturn this.state.tools;\n\t}\n\n\tsetToolsCanvas = (canvas) => {\n\t\tvar tools = this.toolbar.current.getTools();\n\t\tvar canvas = this.getCanvas().current;\n\t\tfor (var i in tools) {\n\t\t\tvar tool = tools[i];\n\t\t\ttool.setCanvas(canvas)\n\t\t}\n\t}\n\n\tmouseDown = event => {\n\t\tthis.toolbar.current.hideConfig();\n\t\tthis.setMouseIsDown(true);\n\t\tthis.initializePaths(event);\n\t}\n\n\tsetMouseIsDown = (value) => {\n\t\tthis.setState({ isDown: value });\n\t}\n\n\tinitializePaths = (event) => {\n\t\tthis.initializePathBrush(event);\n\t\tthis.initializePathForm(event);\n\t\tthis.initializePathEraser(event);\n\t}\n\n\tinitializePathEraser = (event) => {\n\t\tvar pos = getMousePos(this.state.line.getCanvas(), event);\n\t\tthis.state.lineErase.getContext().beginPath();\n\t\tthis.state.lineErase.updateLine(pos)\n\t}\n\n\tinitializePathBrush = (event) => {\n\t\tvar pos = getMousePos(this.state.line.getCanvas(), event);\n\t\tthis.state.line.getContext().beginPath();\n\t\tthis.state.line.updateLine(pos)\n\t}\n\n\tinitializePathForm = (event) => {\n\t\tvar pos = getMousePos(this.state.line.getCanvas(), event);\n\t\tthis.state.form.getContext().beginPath();\n\t\tthis.state.form.setPosActual(pos);\n\t}\n\n\tmouseUp = event => {\n\t\tvar pos = getMousePos(this.state.canvas, event);\n\t\tthis.setMouseIsDown(false);\n\t\tif (this.state.tool == 'Form') {\n\t\t\tvar pos = getMousePos(this.state.canvas, event);\n\t\t\tthis.state.form.actualizarPos(pos);\n\t\t\tthis.state.form.draw();\t\t\t\n\t\t}\n\t\tthis.closePaths();\n\t}\n\n\tclosePaths = () => {\n\t\tthis.state.form.getContext().closePath();\n\t\tthis.state.line.getContext().closePath();\n\t\tthis.state.lineErase.getContext().closePath();\n\t}\n\n\tmouseMove = event => {\n\t\tif (this.state.isDown) {\n\t\t\tswitch (this.state.tool) {\n\t\t\t\tcase 'Brush':\n\t\t\t\t\tthis.brush(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Eraser':\n\t\t\t\t\tthis.erase(event);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Form':\n\t\t\t\t\tthis.form(event);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\t//this.canvasPush();\n\t\t}\n\t}\n\n\treset = event => {\n\t\tlet ctx = this.state.canvas.getContext('2d');\n\t\tctx.clearRect(0, 0, this.state.canvas.width, this.state.canvas.height);\t\t\t\n\t}\n\n\terase = event => {\n\t\tvar pos = getMousePos(this.state.canvas, event);\n\t\tthis.state.lineErase.setMode('erase');\n\t\tthis.state.lineErase.updateLine(pos);\n\t\tthis.state.lineErase.draw();\n\t}\n\n\tform = () => {\n\n\t}\n\n\tbrush = event => {\n\t\tvar pos = getMousePos(this.state.canvas, event);\n\t\tthis.state.line.setMode('brush');\n\t\tthis.state.line.updateLine(pos);\n\t\tthis.state.line.draw();\n\t}\n\n\thandleToolModified = (toolObj, tool) => {\n\t\tswitch (tool) {\n\t\t\tcase 'Brush':\n\t\t\t\tthis.changeBrush(toolObj);\n\t\t\t\tbreak;\n\t\t\tcase 'Eraser':\n\t\t\t\tthis.changeEraser(toolObj);\n\t\t\t\tbreak;\n\t\t\tcase 'Form':\n\t\t\t\tthis.changeForm(toolObj);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tchangeBrush = (newBrush) => {\n\t\tthis.setState({ line: newBrush, });\n\t}\n\n\tchangeEraser = (newEraser) => {\n\t\tthis.setState({ lineErase: newEraser, });\n\t}\n\n\tchangeForm = (newForm) => {\n\t\tthis.setState({ form: newForm, });\n\t\tnewForm.setCanvas(this.canvas.current)\n\t}\n\n\thandleToolChange = (tool) => {\n\t\tthis.setState({ tool: tool, });\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"Board\">\n\t\t\t\t<canvas ref={this.canvas} id=\"Board\" height='1080px' width='1920px'\n\t\t\t\t\tonMouseDown={(e) => this.mouseDown(e)}\n\t\t\t\t\tonMouseUp={(e) => this.mouseUp(e)}\n\t\t\t\t\tonMouseMove={(e) => this.mouseMove(e)}\n\t\t\t\t\tonClick = { () => this.canvasPush() }\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t></canvas>\n\t\t\t\t<Toolbar ref={this.toolbar}\n\t\t\t\t\tonToolModified={(toolObj, tool) => { this.handleToolModified(toolObj, tool); }}\n\t\t\t\t\tonToolChange={(tool) => { this.handleToolChange(tool); }}\n\t\t\t\t\tonResetCanvas={() => { this.reset(); }}\n\t\t\t\t\tonFormChanged={(form) => { this.changeForm(form); }}\n\t\t\t\t/>\n        <RoomConnection \n          ref={this.roomConnection} \n          room={this.state.room}\n          onCanvasUpdate={(canvasImg) => {this.updateCanvas(canvasImg);}}\n        />\n      />\t\t\t\t\n      </div>\n\n\t\t);\n\t}\n}\n\nexport default Board;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","\nimport React from 'react';\nimport './MainPage.css';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link,\n    Redirect\n} from \"react-router-dom\";\nimport Board from './Board';\n\nclass MainPage extends React.Component {\n    state = {\n        redirect: false,\n        idRoom: undefined\n    }\n    constructor(props, context) {\n        super(props, context);\n    }\n\n    componentDidMount() {\n    }\n\n    connect = () => {\n        var idRoom = document.querySelector('#idroom').value\n        this.setState({ redirect: true, idRoom: idRoom });\n    }\n    render() {\n        const { redirect, idRoom } = this.state\n        if(redirect) {\n            return (\n                <Route \n                    component={() => <Board room={idRoom}/>}\n                />\n            );\n        }\n        return(\n            <div id='mainpage'>\n                <textarea id='idroom' className='box' placeholder='Number of room'></textarea>\n                <button onClick={this.connect}>Connect</button>\n            </div>\n        ) ;\n        \n    }\n}\n\nexport default MainPage;","import React from 'react';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n} from \"react-router-dom\";\nimport MainPage from './MainPage';\nimport Board from './Board';\n\nclass MainRouter extends React.Component {\n    constructor(props, context) {\n        super(props, context);\n        this.idRoom = 3\n    }\n\n    componentDidMount() {\n    }\n\n    connect = () => {\n        var idRoom = document.querySelector('#idroom').value\n        this.idRoom = idRoom\n    }\n    render() {\n        return (\n            <Router>\n                <div>\n                    <Switch>\n                        <Route path={`/`}>\n                            <MainPage/>\n                        </Route>\n                        <Route path={`/room/${this.idRoom}`}>\n                            <Board/>\n                        </Route>\n                    </Switch>\n                </div>\n            </Router>\n        );\n    }\n}\n\nexport default MainRouter;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport Board from './UI/Board'\nimport * as serviceWorker from './serviceWorker';\nimport MainPage from './UI/MainPage';\nimport MainRouter from './UI/MainRouter';\n\nReactDOM.render(<MainRouter />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAA2CAYAAACMRWrdAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAG/SURBVHgB3ZqBTcMwEEUdiQEYoZvQTcoIbEA36AgZBZiAEcIGsMHhU78l60hR4vrsO3/JapomPr++yE3ShDByiGiO7RRGS4Q60jXLcIAR6A3mlqEAYe0Ty89DAcLaKXs/BiCsLSvr/QNKa+Izv4C3rIltfALC2suG7XwBwtp3bI8bt/cDCGuvO/exD7jXmtjXNmCJNbG/TcA4mEOpNdGPPUCcPxZbE33ZAaxlTfRpA7CmNdFvX0ANa6L/foCx4EXDmqjRHpBtoaCKNVGrLSAb07Ym6rUBbGlN1NUHbG1N1NYDhDWeIQ+hU9QAYW0OnVMd0IK1PGuAD6EsPHn8BDv5QgvZ6/7Eb+Vs5FA80vXSittTuCc4vVo6Tx71gLJO5162VIDQMdui1rbUgLICTW2pA6FIM1tNgLJibOsSFNMUCAVVZ8LmQFnhmXRuDfQBQvHqtroCZYOoZssEEAZSxZYZoGxAM91xOWAOiJNshYKYBEopsWUaiLPXlnmglK223ABxaNuf636AUuj/xyH8AXHo9gMsPoFS6O8jR76BOIRbWFh2DzSlBUC9x3bAqvM0TR/Bc2CLXB9ya8Hv1jhAI+cX5JMx4SG/+OIAAAAASUVORK5CYII=\""],"sourceRoot":""}